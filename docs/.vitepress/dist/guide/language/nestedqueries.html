<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nested Queries NEW | LMQL</title>
    <meta name="description" content="Language Model Query Language">
    <link rel="preload stylesheet" href="/assets/style.aca8a88c.css" as="style">
    
    
    <script async src="/promptdown.js"></script>
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1919c326><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-1919c326 data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/lmql.svg" alt data-v-8426fc1a><!--]--><!--[-->LMQL<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-a0fd61f4><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Blog</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/research/index.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Research</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/index.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Docs</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-a0fd61f4 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/eth-sri/lmql" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/eth-sri/lmql" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-1919c326 data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-1919c326 data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Docs</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/guide/index.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/guide/installation.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Installation Instructions</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Language</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/guide/language/nestedqueries.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Nested Queries <span class="badge">NEW</span></p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-1919c326 data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-6ae8e080><div class="content" data-v-6ae8e080><div class="outline-marker" data-v-6ae8e080></div><div class="outline-title" role="heading" data-v-6ae8e080>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6ae8e080><span class="visually-hidden" id="doc-outline-aria-label" data-v-6ae8e080> Table of Contents for current page </span><ul class="root" data-v-6ae8e080 data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _guide_language_nestedqueries" data-v-6b87e69f><div><h1 id="nested-queries-new" tabindex="-1">Nested Queries <span class="badge">NEW</span> <a class="header-anchor" href="#nested-queries-new" aria-label="Permalink to &quot;Nested Queries &lt;span class=&quot;badge&quot;&gt;NEW&lt;/span&gt;&quot;">​</a></h1><div class="subtitle">Modularize your query code with nested prompting.</div><p><em>Nested Queries</em> allow you to execute a query function within the context of another. By nesting multiple query functions, you can build complex programs from smaller, reusable components. For this, LMQL applies the idea of <a href="https://en.wikipedia.org/wiki/Procedural_programming" target="_blank" rel="noreferrer">procedural programming</a> to prompting.</p><p>To better understand this concept, let&#39;s take a look at a simple example:</p><div class="language-lmql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lmql</span><pre class="hljs"><code><span class="line"><span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chain_of_thought</span>():
    <span class="hljs-string">&#39;&#39;&#39;lmql
    &quot;A: Let&#39;s think step by step.\n <span class="hljs-placeholder">[REASONING]</span>&quot;
    &quot;Therefore the answer is<span class="hljs-placeholder">[ANSWER]</span>&quot; where STOPS_AT(ANSWER, &quot;.&quot;)
    return ANSWER.strip()
    &#39;&#39;&#39;</span>

<span class="hljs-string">&quot;Q: It is August 12th, 2020. What date was it &quot;</span>
<span class="hljs-string">&quot;100 days ago? <span class="hljs-placeholder">[ANSWER: chain_of_thought]</span>&quot;</span>
</span></code></pre></div><p>Here, the placeholder variable <code>ANSWER</code> is annotated with a reference to query function <code>chain_of_thought</code>. This means a nested instantiation of query function <code>chain_of_thought</code> will be used to generate the value for <code>ANSWER</code>.</p><p>To understand how this behaves at runtime, consider the execution trace of this program:</p><div class="language-promptdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">promptdown</span><pre animate="true" pd-text="# Model Output
![_|Q: It is August 12th, 2020. What date was it 100 days ago?][@wait|800][@begin|incontext][chain_of_thought|A: Let&#39;s think step by step.][@wait|800][REASONING|100 days ago would be May 4th, 2020.] Therefore the answer is [@end|incontext][ANSWER|May 4th, 2020][@wait|800][@fade|incontext][@wait|800]
[:replay]" __animate="true" animate-speed="50" class="promptdown promptdown-compiled" style="opacity:1;min-height:10em;"><h1 pd-shadow-id="58" text=" "> Model Output</h1><p pd-shadow-id="60" text="" pd-insertion-point="true"><span pd-shadow-id="61" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="62" text="" class="promptdown-var-name" style="display:none;"></span>Q: It is August 12th, 2020. What date was it 100 days ago?</span><span pd-shadow-id="64" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="65" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="68" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-yellow"><span pd-shadow-id="69" text="b" class="promptdown-var-name" style="display:none;">begin</span>incontext</span><p pd-shadow-id="72" id="incontext" text="" pd-ignore-whitespace="true" class="promptdown-container faded" style="display:inline;"><span pd-shadow-id="73" pd-instant="false" text="" class="promptdown-var color-red"><span pd-shadow-id="74" text="c" class="promptdown-var-name">chain_of_thought</span>A: Let&#39;s think step by step.</span><span pd-shadow-id="77" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="78" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="81" pd-instant="false" text="" class="promptdown-var color-yellow"><span pd-shadow-id="82" text="R" class="promptdown-var-name">REASONING</span>100 days ago would be May 4th, 2020.</span> Therefore the answer is <span pd-shadow-id="86" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-orange"><span pd-shadow-id="87" text="e" class="promptdown-var-name" style="display:none;">end</span>incontext</span></p><span pd-shadow-id="90" pd-instant="false" text="" class="promptdown-var color-ochre"><span pd-shadow-id="91" text="A" class="promptdown-var-name">ANSWER</span>May 4th, 2020</span><span pd-shadow-id="94" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="95" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="98" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-red"><span pd-shadow-id="99" text="f" class="promptdown-var-name" style="display:none;">fade</span>incontext</span><span pd-shadow-id="102" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="103" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span>
</p><button onclick="pd(this.parentElement)" class="promptdown-button-replay">↺ Replay</button></pre></div><blockquote><p>You can press <em>Replay</em> to re-run the animation.</p></blockquote><p>To generate <code>ANSWER</code>, the additional prompt and constraints defined by <code>chain_of_thought</code> are inserted into our main query context. However, after <code>ANSWER</code> has been generated, the additional instructions are removed from the trace, leaving only the return value of the nested query call. This mechanic is comparable to a function&#39;s stack frame in procedural programming.</p><p>Nesting allows you to use variable-specific instructions that are only locally relevant, without interfering with other parts of the program, encapsulating the logic of your prompts into reusable components.</p><h2 id="parameterized-queries" tabindex="-1">Parameterized Queries <a class="header-anchor" href="#parameterized-queries" aria-label="Permalink to &quot;Parameterized Queries&quot;">​</a></h2><p>You can also pass parameters to nested queries, allowing you to customize their behavior:</p><div class="language-lmql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lmql</span><pre class="hljs"><code><span class="line"><span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">one_of</span>(<span class="hljs-params">choices: <span class="hljs-built_in">list</span></span>):
    <span class="hljs-string">&#39;&#39;&#39;lmql
    &quot;Among <span class="hljs-subst">{choices}</span>, what do you consider \
    most likely? <span class="hljs-placeholder">[ANSWER]</span>&quot; where ANSWER in choices
    return ANSWER
    &#39;&#39;&#39;</span>

<span class="hljs-string">&quot;Q: What is the capital of France? \
 <span class="hljs-placeholder">[ANSWER: one_of([<span class="hljs-string">&#39;Paris&#39;</span>, <span class="hljs-string">&#39;London&#39;</span>, <span class="hljs-string">&#39;Berlin&#39;</span>]</span>)]&quot;</span>
</span></code></pre></div><div class="language-promptdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">promptdown</span><pre animate="true" pd-text="# Model Output
![_|Q: What is the capital of France?][@wait|800][@begin|incontext][one_of|Among \[&#39;Paris&#39;, &#39;London&#39;, &#39;Berlin&#39;\], what do you consider most likely?][@end|incontext][@wait|800][ANSWER|Paris][@wait|800][@fade|incontext][@wait|800][:replay]" __animate="true" animate-speed="50" class="promptdown promptdown-compiled" style="opacity:1;min-height:10em;"><h1 pd-shadow-id="109" text=" "> Model Output</h1><p pd-shadow-id="111" text="" pd-ignore-whitespace="true" pd-insertion-point="true"><span pd-shadow-id="112" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="113" text="" class="promptdown-var-name" style="display:none;"></span>Q: What is the capital of France?</span><span pd-shadow-id="115" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="116" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="119" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-yellow"><span pd-shadow-id="120" text="b" class="promptdown-var-name" style="display:none;">begin</span>incontext</span><p pd-shadow-id="123" id="incontext" text="" pd-ignore-whitespace="true" class="promptdown-container faded" style="display:inline;"><span pd-shadow-id="124" pd-instant="false" text="" class="promptdown-var color-red"><span pd-shadow-id="125" text="o" class="promptdown-var-name">one_of</span>Among [&#39;Paris&#39;, &#39;London&#39;, &#39;Berlin&#39;], what do you consider most likely?</span><span pd-shadow-id="128" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-orange"><span pd-shadow-id="129" text="e" class="promptdown-var-name" style="display:none;">end</span>incontext</span></p><span pd-shadow-id="132" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="133" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="136" pd-instant="false" text="" class="promptdown-var color-ochre"><span pd-shadow-id="137" text="A" class="promptdown-var-name">ANSWER</span>Paris</span><span pd-shadow-id="140" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="141" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span><span pd-shadow-id="144" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-red"><span pd-shadow-id="145" text="f" class="promptdown-var-name" style="display:none;">fade</span>incontext</span><span pd-shadow-id="148" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="149" text="w" class="promptdown-var-name" style="display:none;">wait</span>800</span></p><button onclick="pd(this.parentElement)" class="promptdown-button-replay">↺ Replay</button></pre></div><p>For instance, here we employ <code>one_of</code> to generate the answer to a multiple-choice question. The <code>choices</code> are passed as a parameter to the nested query, allowing us to reuse the same code for different questions.</p><h2 id="multi-part-programs" tabindex="-1">Multi-Part Programs <a class="header-anchor" href="#multi-part-programs" aria-label="Permalink to &quot;Multi-Part Programs&quot;">​</a></h2><p>You can also use multiple nested queries in sequence, allowing you to repeatedly inject instructions into your prompt without interfering with the overall flow:</p><div class="language-lmql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lmql</span><pre class="hljs"><code><span class="line"><span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dateformat</span>():
    <span class="hljs-string">&#39;&#39;&#39;lmql
    &quot;(respond in DD/MM/YYYY) <span class="hljs-placeholder">[ANSWER]</span>&quot;
    return ANSWER.strip()
    &#39;&#39;&#39;</span>

<span class="hljs-string">&quot;Q: When was Obama born? <span class="hljs-placeholder">[ANSWER: dateformat]</span>\n&quot;</span>
<span class="hljs-string">&quot;Q: When was Bruno Mars born? <span class="hljs-placeholder">[ANSWER: dateformat]</span>\n&quot;</span>
<span class="hljs-string">&quot;Q: When was Dua Lipa born? <span class="hljs-placeholder">[ANSWER: dateformat]</span>\n&quot;</span>

<span class="hljs-string">&quot;Out of these, who was born last?<span class="hljs-placeholder">[LAST]</span>&quot;</span>
</span></code></pre></div><div class="language-promptdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">promptdown</span><pre animate="true" pd-text="# Model Output
![_|Q: When was Obama born?][@wait|200][@begin|incontext][dateformat|(respond in DD/MM/YYYY)][@end|incontext][@wait|200][ANSWER|04/08/1961][@wait|200][@fade|incontext][@wait|200][@hide|incontext][@wait|200]
![_|Q: When was Bruno Mars born?][@wait|200][@begin|incontext1][dateformat|(respond in DD/MM/YYYY)][@end|incontext1][@wait|200][ANSWER|08/10/1985][@wait|200][@fade|incontext1][@wait|200][@hide|incontext1][@wait|200]
![_|Q: When was Dua Lipa born?][@wait|200][@begin|incontext2][dateformat|(respond in DD/MM/YYYY)][@end|incontext2][@wait|200][ANSWER|22/08/1995][@wait|200][@fade|incontext2][@wait|200][@hide|incontext2][@wait|200]

[_|Out of these, who was born last?][LAST|Dua Lipa]
[:replay]" __animate="true" animate-speed="50" class="promptdown promptdown-compiled" style="opacity:1;min-height:14em;"><h1 pd-shadow-id="154" text=" "> Model Output</h1><p pd-shadow-id="156" text="" pd-insertion-point="true"><span pd-shadow-id="157" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="158" text="" class="promptdown-var-name" style="display:none;"></span>Q: When was Obama born?</span><span pd-shadow-id="160" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="161" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="164" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-yellow"><span pd-shadow-id="165" text="b" class="promptdown-var-name" style="display:none;">begin</span>incontext</span><p pd-shadow-id="168" id="incontext" text="" pd-ignore-whitespace="true" class="promptdown-container faded" style="display:none;"><span pd-shadow-id="169" pd-instant="false" text="" class="promptdown-var color-yellow"><span pd-shadow-id="170" text="d" class="promptdown-var-name">dateformat</span>(respond in DD/MM/YYYY)</span><span pd-shadow-id="173" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-orange"><span pd-shadow-id="174" text="e" class="promptdown-var-name" style="display:none;">end</span>incontext</span></p><span pd-shadow-id="177" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="178" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="181" pd-instant="false" text="" class="promptdown-var color-ochre"><span pd-shadow-id="182" text="A" class="promptdown-var-name">ANSWER</span>04/08/1961</span><span pd-shadow-id="185" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="186" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="189" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-red"><span pd-shadow-id="190" text="f" class="promptdown-var-name" style="display:none;">fade</span>incontext</span><span pd-shadow-id="193" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="194" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="197" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-ochre"><span pd-shadow-id="198" text="h" class="promptdown-var-name" style="display:none;">hide</span>incontext</span><span pd-shadow-id="201" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="202" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span>
<span pd-shadow-id="206" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="207" text="" class="promptdown-var-name" style="display:none;"></span>Q: When was Bruno Mars born?</span><span pd-shadow-id="209" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="210" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="213" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-yellow"><span pd-shadow-id="214" text="b" class="promptdown-var-name" style="display:none;">begin</span>incontext1</span><p pd-shadow-id="217" id="incontext1" text="" pd-ignore-whitespace="true" class="promptdown-container faded" style="display:none;"><span pd-shadow-id="218" pd-instant="false" text="" class="promptdown-var color-yellow"><span pd-shadow-id="219" text="d" class="promptdown-var-name">dateformat</span>(respond in DD/MM/YYYY)</span><span pd-shadow-id="222" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-orange"><span pd-shadow-id="223" text="e" class="promptdown-var-name" style="display:none;">end</span>incontext1</span></p><span pd-shadow-id="226" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="227" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="230" pd-instant="false" text="" class="promptdown-var color-ochre"><span pd-shadow-id="231" text="A" class="promptdown-var-name">ANSWER</span>08/10/1985</span><span pd-shadow-id="234" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="235" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="238" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-red"><span pd-shadow-id="239" text="f" class="promptdown-var-name" style="display:none;">fade</span>incontext1</span><span pd-shadow-id="242" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="243" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="246" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-ochre"><span pd-shadow-id="247" text="h" class="promptdown-var-name" style="display:none;">hide</span>incontext1</span><span pd-shadow-id="250" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="251" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span>
<span pd-shadow-id="255" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="256" text="" class="promptdown-var-name" style="display:none;"></span>Q: When was Dua Lipa born?</span><span pd-shadow-id="258" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="259" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="262" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-yellow"><span pd-shadow-id="263" text="b" class="promptdown-var-name" style="display:none;">begin</span>incontext2</span><p pd-shadow-id="266" id="incontext2" text="" pd-ignore-whitespace="true" class="promptdown-container faded" style="display:none;"><span pd-shadow-id="267" pd-instant="false" text="" class="promptdown-var color-yellow"><span pd-shadow-id="268" text="d" class="promptdown-var-name">dateformat</span>(respond in DD/MM/YYYY)</span><span pd-shadow-id="271" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-orange"><span pd-shadow-id="272" text="e" class="promptdown-var-name" style="display:none;">end</span>incontext2</span></p><span pd-shadow-id="275" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="276" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="279" pd-instant="false" text="" class="promptdown-var color-ochre"><span pd-shadow-id="280" text="A" class="promptdown-var-name">ANSWER</span>22/08/1995</span><span pd-shadow-id="283" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="284" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="287" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-red"><span pd-shadow-id="288" text="f" class="promptdown-var-name" style="display:none;">fade</span>incontext2</span><span pd-shadow-id="291" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="292" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span><span pd-shadow-id="295" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-ochre"><span pd-shadow-id="296" text="h" class="promptdown-var-name" style="display:none;">hide</span>incontext2</span><span pd-shadow-id="299" pd-instant="false" pd-cmd="true" text="" class="promptdown-var cmd color-pink"><span pd-shadow-id="300" text="w" class="promptdown-var-name" style="display:none;">wait</span>200</span>

<span pd-shadow-id="304" pd-instant="false" text="" class="promptdown-var color-none"><span pd-shadow-id="305" text="" class="promptdown-var-name" style="display:none;"></span>Out of these, who was born last?</span><span pd-shadow-id="307" pd-instant="false" text="" class="promptdown-var color-pink"><span pd-shadow-id="308" text="L" class="promptdown-var-name">LAST</span>Dua Lipa</span>
</p><button onclick="pd(this.parentElement)" class="promptdown-button-replay">↺ Replay</button></pre></div><p>We instruct the model to use a specific date format when answering our initial questions. Because of the use of <code>dateformat</code> as a nested function, the instructions are only temporarily included, once per generated answer, and removed before moving on to the next question.</p><p>Once we have generated all intermediate answers, we query the LLM to compare the individual dates and determine the latest one, where this last query is not affected by the instructions of <code>dateformat</code>.</p><h2 id="return-values" tabindex="-1">Return Values <a class="header-anchor" href="#return-values" aria-label="Permalink to &quot;Return Values&quot;">​</a></h2><p>If a query function does <em>not</em> return a value, calling it as nested function does <em>not</em> remove the inserted instructions after execution. The effect of a nested function without return value therefore corresponds to a macro expansion, as shown below:</p><p>This can be helpful when you want to use a fixed template in several locations, e.g. for list items. Further, as shown below, a nested function can also be parameterized to customize its behavior.</p><div class="language-lmql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lmql</span><pre class="hljs"><code><span class="line"><span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">items_list</span>(<span class="hljs-params">n: <span class="hljs-built_in">int</span></span>):
    <span class="hljs-string">&#39;&#39;&#39;lmql
    for i in range(n):
        &quot;-<span class="hljs-placeholder">[ITEM]</span>&quot; where STOPS_AT(ITEM, &quot;\n&quot;)
    &#39;&#39;&#39;</span>

<span class="hljs-string">&quot;A list of things not to forget to pack for your \
 next trip:\n<span class="hljs-placeholder">[ITEMS: items_list(<span class="hljs-number">4</span>)]</span>&quot;</span>
</span></code></pre></div><div class="language-promptdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">promptdown</span><pre pd-text="
![_|A list of things not to forget to pack for your next trip:]
![ITEM|- Passport]
![ITEM|- Toothbrush]
![ITEM|- Phone charger]
![ITEM|- Sunscreen]]
" animate="true" __animate="true" animate-speed="50" class="promptdown promptdown-compiled" style="opacity:1;min-height:10em;"><p pd-shadow-id="313" text="
" pd-insertion-point="true">
<span pd-shadow-id="315" pd-instant="true" text="" class="promptdown-var color-none"><span pd-shadow-id="316" text="" class="promptdown-var-name" style="display:none;"></span>A list of things not to forget to pack for your next trip:</span>
<span pd-shadow-id="319" pd-instant="true" text="" class="promptdown-var color-lightorange"><span pd-shadow-id="320" text="I" class="promptdown-var-name">ITEM</span>- Passport</span>
<span pd-shadow-id="324" pd-instant="true" text="" class="promptdown-var color-lightorange"><span pd-shadow-id="325" text="I" class="promptdown-var-name">ITEM</span>- Toothbrush</span>
<span pd-shadow-id="329" pd-instant="true" text="" class="promptdown-var color-lightorange"><span pd-shadow-id="330" text="I" class="promptdown-var-name">ITEM</span>- Phone charger</span>
<span pd-shadow-id="334" pd-instant="true" text="" class="promptdown-var color-lightorange"><span pd-shadow-id="335" text="I" class="promptdown-var-name">ITEM</span>- Sunscreen</span>]
</p></pre></div><h2 id="nested-queries-in-python" tabindex="-1">Nested Queries in Python <a class="header-anchor" href="#nested-queries-in-python" aria-label="Permalink to &quot;Nested Queries in Python&quot;">​</a></h2><p>To use nested queries from a Python context, you can just reference one <code>@lmql.query</code> function from another.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="hljs"><code><span class="line">
<span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">dateformat</span>():
    <span class="hljs-string">&#39;&#39;&#39;lmql
    &quot;(respond in DD/MM/YYYY)<span class="hljs-placeholder">[ANSWER]</span>&quot;
    return ANSWER.strip()
    &#39;&#39;&#39;</span>

<span class="hljs-meta">@lmql.query</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">main_query</span>():
    <span class="hljs-string">&#39;&#39;&#39;lmql
    &quot;Q: It is August 12th, 2020. What date was it \
    100 days ago? <span class="hljs-placeholder">[ANSWER: dateformat]</span>&quot;
    &#39;&#39;&#39;</span>
</span></code></pre></div><p>Here, <code>main_query</code> references <code>dateformat</code> as a nested query, where both functions are defined on the top level of the same file. However, you can also import and reuse query code from other files, as long as they are accessible from the scope of you main query function. Using this ability you can write libraries of reusable query functions to be used across your application or even by other users.</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><!----><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><a class="pager-link prev" href="/guide/installation.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Previous page</span><span class="title" data-v-ef5dee53>Installation Instructions</span></a></div><div class="pager" data-v-ef5dee53><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    
    
  </body>
</html>